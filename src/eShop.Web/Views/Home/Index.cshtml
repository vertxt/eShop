@model HomeViewModel
@{
    ViewData["Title"] = "Home";
}

<!-- Hero Section -->
<div class="container-fluid p-0">
    <div id="bannerSlider" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#bannerSlider" data-bs-slide-to="0" class="active" aria-current="true"
                aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#bannerSlider" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#bannerSlider" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://res.cloudinary.com/dksvjpf8z/image/upload/v1746744934/6931b00e-a7a7-4e52-9606-17d537426679_rjktru.webp" class="d-block w-100">
                <div class="carousel-caption d-none d-md-block">
                    @* <h1 class="display-4 fw-bold">Hotests Deals</h1>
                    <p class="lead">2 Blu-ray for 15$</p> *@
                    <a href="#deals" class="btn btn-danger btn-lg">See Deals</a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://res.cloudinary.com/dksvjpf8z/image/upload/v1746744934/7e14d201-8662-4a7a-8d28-62cfb15d8f3f_kp4dhs.webp" class="d-block w-100">
                <div class="carousel-caption d-none d-md-block">
                    @* <h1 class="display-4 fw-bold">Ani-May 2025</h1>
                    <p class="lead">A month-long celebration of anime</p> *@
                    <a href="#featured" class="btn btn-primary btn-lg">Shop Now</a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://res.cloudinary.com/dksvjpf8z/image/upload/v1746744935/121f22ec-dc05-4abf-8874-5e00a4edf7ea_ehi7j8.webp" class="d-block w-100">
                <div class="carousel-caption d-none d-md-block">
                    @* <h1 class="display-4 fw-bold">New Arrivals</h1>
                    <p class="lead">Be the first to own the latest products</p> *@
                    <a href="#new" class="btn btn-success btn-lg">Explore</a>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#bannerSlider" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#bannerSlider" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>

<!-- Featured Categories -->
<div class="container mt-5">
    <div class="row">
        <div class="col-12 text-center mb-4">
            <h2 class="display-5 fw-bold">Shop by Category</h2>
            <p class="lead text-muted">Explore our wide range of products</p>
        </div>
    </div>

    <div class="row g-4">
        @if (Model.Categories != null && Model.Categories.Any())
        {
            @foreach (var category in Model.Categories.Take(3))
            {
                <div class="col-md-4">
                    <div class="card h-100 shadow-sm hover-zoom">
                        <div class="card-body text-center">
                            <h3 class="card-title fw-bold">@category.Name</h3>
                            <p class="card-text">@category.Description</p>
                            <a href="@Url.Action("Index", "Products", new { CategoryIds = new List<int>([category.Id]) })"
                                class="btn btn-outline-primary">
                                Browse @category.Name
                            </a>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-md-4">
                <div class="card h-100 shadow-sm hover-zoom">
                    <img src="https://fakeimg.pl/400x300/e8f4ff/0d6efd?text=Electronics" class="card-img-top"
                        alt="Electronics">
                    <div class="card-body text-center">
                        <h3 class="card-title">Electronics</h3>
                        <p class="card-text">Latest gadgets and tech accessories</p>
                        <a href="#" class="btn btn-outline-primary">Browse Electronics</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm hover-zoom">
                    <img src="https://fakeimg.pl/400x300/fff3cd/ffc107?text=Fashion" class="card-img-top" alt="Fashion">
                    <div class="card-body text-center">
                        <h3 class="card-title">Fashion</h3>
                        <p class="card-text">Trending clothes, shoes and accessories</p>
                        <a href="#" class="btn btn-outline-warning">Browse Fashion</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm hover-zoom">
                    <img src="https://fakeimg.pl/400x300/d1e7dd/198754?text=Home" class="card-img-top" alt="Home">
                    <div class="card-body text-center">
                        <h3 class="card-title">Home & Living</h3>
                        <p class="card-text">Furniture, decor and kitchen essentials</p>
                        <a href="#" class="btn btn-outline-success">Browse Home</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<!-- Featured Products -->
<div id="featured" class="container mt-5 pt-3">
    <div class="row mb-4">
        <div class="col-md-8">
            <h2 class="display-6 fw-bold">Featured Products</h2>
            <p class="text-muted">Handpicked for you</p>
        </div>
        <div class="col-md-4 text-md-end align-self-center">
            <a href="@Url.Action("Index", "Products")" class="btn btn-link text-decoration-none">View all products <i
                    class="bi bi-arrow-right"></i></a>
        </div>
    </div>

    <div class="row g-4">
        @if (Model != null && Model.FeaturedProducts.Any())
        {
            @foreach (var product in Model.FeaturedProducts.Take(4))
            {
                <div class="col-md-3 col-sm-6">
                    <div class="card h-100 product-card">
                        <div class="product-image-container position-relative" style="height: 300px; overflow: hidden;">
                            <img src="@(string.IsNullOrEmpty(product.MainImageUrl) ? $"https://fakeimg.pl/300x300/f8f9fa/6c757d?text={product.Name}" : product.MainImageUrl)"
                                class="card-img-top" alt="@product.Name" style="object-fit: cover; height: 100%; width: 100%;">
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-truncate">@product.Name</h5>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <p class="card-text mb-0">
                                    <strong>$@product.BasePrice.ToString("F2")</strong>
                                </p>
                                <div class="rating">
                                    @for (int j = 0; j < 5; j++)
                                    {
                                        <i class="bi bi-star-fill @(j < product.AverageRating ? "text-warning" : "text-muted")"></i>
                                    }
                                </div>
                            </div>
                            <div class="mt-auto d-grid">
                                <a href="@Url.Action("Details", "Product", new { id = product.Id })"
                                    class="btn btn-outline-primary mb-2">View Details</a>
                                <button class="btn btn-primary add-to-cart" data-product-id="@product.Id">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            @for (int i = 1; i <= 4; i++)
            {
                <div class="col-md-3 col-sm-6">
                    <div class="card h-100 product-card">
                        <span class="badge bg-danger position-absolute top-0 end-0 m-2">SALE</span>
                        <img src="https://fakeimg.pl/300x300/f8f9fa/6c757d?text=Product+@i" class="card-img-top"
                            alt="Product @i">
                        <div class="card-body">
                            <h5 class="card-title">Product Name @i</h5>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <p class="card-text mb-0"><strong>$99.99</strong> <span
                                        class="text-muted text-decoration-line-through">$129.99</span></p>
                                <div class="rating">
                                    @for (int j = 0; j < 5; j++)
                                    {
                                        <i class="bi bi-star-fill text-warning"></i>
                                    }
                                </div>
                            </div>
                            <div class="d-grid">
                                <button class="btn btn-primary">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>

<!-- Deals Section -->
<div id="deals" class="container-fluid bg-light mt-5 py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h2 class="display-5 fw-bold">Deal of the Day</h2>
                <p class="lead">Get amazing discounts before they're gone!</p>
                <div class="bg-white shadow p-4 rounded">
                    <h3>House of Marley Turntable & Speakers</h3>
                    <div class="d-flex align-items-center mb-3">
                        <h4 class="text-danger mb-0 me-2">$129.99</h4>
                        <span class="text-muted text-decoration-line-through">$249.99</span>
                        <span class="badge bg-danger ms-auto">48% OFF</span>
                    </div>
                    <div class="progress mb-3" style="height: 8px;">
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 75%;" aria-valuenow="75"
                            aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-muted">Already sold: 75 units - Only 25 left</small>
                    <div class="d-grid mt-3">
                        <button class="btn btn-lg btn-danger">Buy Now</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 text-center">
                <img src="https://res.cloudinary.com/dksvjpf8z/image/upload/v1746745314/6496c02c-b31c-4b58-b552-defc6ce00736_a73lob.webp"
                    class="img-fluid rounded shadow" alt="Deal of the Day">
            </div>
        </div>
    </div>
</div>

<!-- Newsletter -->
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8 text-center">
            <h2 class="fw-bold">Stay Updated</h2>
            <p class="lead">Subscribe to our newsletter for exclusive offers and updates</p>
            <div class="input-group mb-3">
                <input type="email" class="form-control form-control-lg" placeholder="Your email address">
                <button class="btn btn-dark" type="button">Subscribe</button>
            </div>
            <p class="text-muted small">By subscribing, you agree to our Privacy Policy and Terms of Service</p>
        </div>
    </div>
</div>

<!-- Add to _Layout.cshtml or in a section -->
<style>
    .hover-zoom {
        transition: transform 0.3s ease;
    }

    .hover-zoom:hover {
        transform: translateY(-5px);
    }

    .product-card:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
</style>

@section Scripts {
    <script>
        // Enable carousels to auto-slide
        document.addEventListener('DOMContentLoaded', function () {
            var carousel = new bootstrap.Carousel(document.getElementById('bannerSlider'), {
                interval: 5000
            });
        });
    </script>
}